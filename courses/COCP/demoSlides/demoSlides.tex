\documentclass[usenames,dvipsnames]{beamer}
\usepackage[utf8]{inputenc}  % Linux, macOS: enable non-English characters
%\usepackage[latin1]{inputenc}    % Windows: enable non-English characters
\usetheme[numbers,sidebarshades]{UU}

\usepackage{helvet}
\usepackage{courier}   % \texttt{...} gives thinner text and /\ displays OK
\usepackage{graphicx}  % provides \includegraphics

\input{mznlisting}
\input{macros}
\renewcommand{\todo}[1]{\blue{#1}}    % rather show to-do items in blue
\hypersetup{colorlinks=true,urlcolor=red}

%\newcommand{\myPause}{}       %% Use this definition when preparing your talk
\newcommand{\myPause}{\pause}  %% Use this definition when giving your talk

%% Colours (used only in macros.tex):
\newcommand<>{\blue}[1]{\textcolor#2{blue}{#1}}
\newcommand<>{\green}[1]{\textcolor#2{OliveGreen}{#1}}
\newcommand<>{\red}[1]{\textcolor#2{red}{#1}}

% Remove dropshadow from blocks, but they are still rounded:
\setbeamertemplate{blocks}[rounded][shadow=false]
% Remove gradient below header in blocks:
\makeatletter
\pgfdeclareverticalshading[lower.bg,upper.bg]{bmb@transition}{200cm}{color(0pt)=(lower.bg); color(4pt)=(lower.bg); color(4pt)=(upper.bg)}
\makeatother
% Non-gradient bulllets:
\setbeamertemplate{section in toc}{\inserttocsectionnumber.~\inserttocsection}%[circle]
\setbeamertemplate{subsection in toc}[circle]

\title[Topic]{Warehouse Location}  %% Replace by your project title

\subtitle{(Project presentation of \today)}  %% Fix the date, if need be

%% Replace by your name(s) and choose the encoding of line 2 or line 3:
\author[]{Clara CLÃ„VER and Whiz KIDD \\
  Team~t}  %% Replace t by your team number(s)

\institute[]{Uppsala University \\ Sweden \\}

\date[COCP / M4CO]{
  Course 1DL442: \\
  Combinatorial Optimisation and Constraint Programming, \\
  whose part 1 is Course 1DL451: \\
  Modelling for Combinatorial Optimisation \\
}

\AtBeginSection[]
{
  \begin{frame}<beamer>{Outline}
    \tableofcontents[currentsection]
  \end{frame}
}

\AtBeginSubsection[]
{
  \begin{frame}<beamer>{Outline}
    \tableofcontents[currentsection,currentsubsection]
  \end{frame}
}

% \setbeamercovered{transparent=5}

\begin{document}

\begin{frame}[plain]
  \titlepage
\end{frame}

\begin{frame}{Outline}
  \tableofcontents
\end{frame}

\section{Problem}

\begin{frame}{Warehouse Location: Setting and Data}
  A company considers opening warehouses at some candidate locations
  in order to supply its existing shops: \vfill\myPause
  \begin{itemize}
  \item Each candidate warehouse here has (for simplicity) \\ the same
    maintenance cost. \vfill\myPause
  \item Each candidate warehouse has a supply capacity, \\ which is
    the maximum number of shops it can supply. \vfill\myPause
  \item The supply cost to a shop depends on the warehouse.
  \end{itemize}
  \todo{\vfill [In general: a picture is worth a thousand words!]}
  % Pictures can be loaded by \includegraphics[width=100mm]{filename}
  % or \includegraphics[height=25mm]{filename} and adjusting the size.
\end{frame}

\begin{frame}{Warehouse Location: Problem}
  Determine which candidate warehouses actually to open, and which of
  them supplies which shops, so that: \vfill\myPause
  \begin{description}
  \item[1Supplier:] Each shop is supplied by exactly one actually
    opened warehouse. \vfill\myPause
  \item[Capacity:] Each actually opened warehouse supplies a number of
    shops at most equal to its capacity. \vfill\myPause
  \item[MinCost:] The sum of the actually incurred maintenance costs
    and supply costs is minimal.
  \end{description}
  \todo{\vfill [In general: a picture is worth a thousand words!]}
\end{frame}

\section{Example}

\begin{frame}\label{OPLdata}  % use "[fragile]" upon mzn[no]
  Simple data:
  
  \small
  \lstinputlisting[language=Mzn,firstnumber=2,firstline=2,lastline=13]{WLP-OPLbook-forSlides.dzn}
  \normalsize\vfill\myPause

  The minimal cost is 383, uniquely for: Bern supplies shop 4; Cork
  supplies shops 2, 6, 7, 9; Lyon supplies shops 8, 10; Oslo supplies
  no shops; and Roma supplies shops 1, 3, 5. \normalsize\vfill\myPause

  Our experiments at slide~\ref{experiments} use hard third-party real
  data from
  \href{https://www.csplib.org/Problems/prob034/data}{https://www.csplib.org/Problems/prob034/data}.
\end{frame}

\section{Approach}

\begin{frame}{Parameters}  % use "[fragile]" upon mzn[no]
  \small
  \lstinputlisting[language=Mzn,firstnumber=2,firstline=2,lastline=9]{WLP2.mzn}
  \normalsize

  \todo{\vfill [In general: present \emph{only} your \emph{best}
    approach so far!]}
\end{frame}

\begin{frame}{Decision Variables and Channelling}  % use "[fragile]" upon mzn[no]
  Automatic enforcement of the 1Supplier constraint (each shop is
  supplied by exactly~1actually opened warehouse): \vfill\myPause

  \small
  \lstinputlisting[language=Mzn,firstnumber=10,firstline=10,lastline=11]{WLP2.mzn}
  \normalsize\vfill\myPause

  For expressing the search strategy (at slide~\ref{search}), we
  \emph{need} non-mutually redundant variables, and we channel 1-way:
  \vfill

  \small
  \lstinputlisting[language=Mzn,firstnumber=13,firstline=13,lastline=16]{WLP2.mzn}
  \normalsize

  \todo{\vfill [In general: (experimentally) justify the use or
    absence of (mutually or non-mutually) redundant variables and
    their (one-way or two-way) channelling constraints!]}
\end{frame}

\begin{frame}{Objective}\label{objFct}  % use "[fragile]" upon mzn[no]
  We model the objective function (the sum of the actually incurred
  maintenance costs and supply costs is to be minimised) using the
  redundant variables for brevity: \vfill\myPause

  \small
  \lstinputlisting[language=Mzn,firstnumber=25,firstline=25,lastline=26]{WLP2.mzn}
  \normalsize

  \todo{\vfill [In general: crosscheck your model against the advice
    of Topics~2 and~3 at
    \url{http://user.it.uu.se/~pierref/courses/COCP/demoReport/checklist.pdf}.]}
\end{frame}

\begin{frame}{Capacity Constraint and Inference}  % use "[fragile]" upon mzn[no]
  Capacity constraint (each actually opened warehouse supplies a
  number of shops at most equal to its capacity): \vfill\myPause

  \small
  \lstinputlisting[language=Mzn,firstnumber=18,firstline=18,lastline=21]{WLP2.mzn}
  \normalsize\vfill\myPause

  We suggest domain consistency to CP and LCG backends, as our tests
  show their defaults are slower on hard data.

  \todo{\vfill [In general: (experimentally) justify inference
    annotations!]}
\end{frame}

\begin{frame}{Implied Constraints}  % use "[fragile]" upon mzn[no]
  We did not yet derive any useful implied constraints.

  \todo{\vfill [In general: (experimentally) justify the use or
    absence of implied constraints and their inference annotations!]}
\end{frame}

\begin{frame}{Symmetry-Breaking Constraints}  % use "[fragile]" upon mzn[no]
  We did not detect any symmetries in the problem or model.
  \vfill\myPause

  There can be (possibly dynamic) instance symmetries --- namely
  warehouses that (dynamically) have the same capacity (whereas shops
  with the same supply costs are extremely unlikely) --- but the
  supply costs of same-capacity warehouses most likely differ in real
  life, so we decided not to detect and exploit instance
  symmetries.

  \todo{\vfill [In general: (experimentally) justify the use or
    absence of symmetry-breaking constraints and their inference
    annotations!]}
\end{frame}

\begin{frame}[fragile]{Output}  % use "[fragile]" upon mzn[no]
  In order to display intermediate objective values on-the-fly, we
  need another non-mutually redundant variable, and we channel it
  1-way to take the objective value (see slide~\ref{objFct}):
  \vfill\myPause

  \small
  \lstinputlisting[language=Mzn,firstnumber=23,firstline=23,lastline=26]{WLP2.mzn}
  \normalsize\vfill\myPause

  so that the objective becomes \vfill

  \small
  \begin{mznno}
    solve minimize cost;
  \end{mznno}  % MiniZinc model snippet with no line numbers
  \normalsize\vfill\myPause

  and the output statement becomes \vfill

  \footnotesize
  \lstinputlisting[language=Mzn,firstnumber=34,firstline=34,lastline=34]{WLP2.mzn}
\end{frame}

\begin{frame}{Search}\label{search}  % use "[fragile]" upon mzn[no]
  We suggest the maximal-regret search strategy to CP, LCG, and MIP
  backends.  It is expressed as follows: \vfill\myPause

  \small
  \lstinputlisting[language=Mzn,firstnumber=28,firstline=28,lastline=33]{WLP2.mzn}
  \normalsize\vfill\myPause

  We experimentally established the merit of this strategy (over the
  default and other strategies) for this model in the slides of
  Topic~8.

  \todo{\vfill [In general: (experimentally) justify search
    annotations!]}
\end{frame}

\begin{frame}{Efficiency}  % use "[fragile]" upon mzn[no]
  The model features no violations of any pieces of advice in the
  checklists of Topics~2 and~3.

  \todo{\vfill [In general: For each violation of a piece of advice of
    Topics~2 and~3 in
    \url{http://user.it.uu.se/~pierref/courses/COCP/demoReport/checklist.pdf}:
    \\ how do you argue that it does not matter?  For example, for a
    reification or for a \mzninline{where} clause involving variables,
    does a profiled compilation reveal numbers of generated variables
    and constraints that you argue to be acceptable; or is the solving
    time comparable to the one of a violation-free reformulation that
    you give?]}
\end{frame}

\begin{frame}{Correctness}  % use "[fragile]" upon mzn[no]
  All the objective values reported in the experiments that were
  proven minimal before timing out do not contradict those found by
  the approach of Team~11.

  \todo{\vfill [In general: How do you argue for the correctness of
    your approach? For example, did you use a checker based on another
    model, say a model of another team or a translation of a MIP model
    given somewhere?  Did you use the same instances as another team?
    If it is a satisfaction problem: did you compare the numbers of
    solutions with numbers reported somewhere or by another team?  If
    it is an optimisation problem: did you compare objective values
    proven optimal before timing out (respectively objective values
    known when timing out) with optimal objective values (respectively
    best-known objective values) reported somewhere or by another
    team?]}
  % For displaying the number of solutions: within the Configuration
  % Editor of the MiniZinc IDE, first choose "User defined behavior"
  % and uncheck "Stop after this many solutions", and then add a
  % custom "extra configuration parameter" called "-s" and having
  % the value "-s".
\end{frame}

\section{Experiments}

\begin{frame}\label{experiments}
  The hard real-life instance \texttt{cap44} at
  \href{https://www.csplib.org/Problems/prob034/data}{CSPlib.org} supplies
  $50$~shops from $16$~candidate warehouses, all of capacity~$4$.  We
  did not find a published minimal total cost. \vfill\myPause

%% specs of the ThinLinc machines of the IT department:
%
% Linux Ubuntu~16.04 ($64$~bit) on an Intel Xeon E5520 of $2.27$~GHz,
% with $4$~processors of $4$~cores each, with a $24$~GB RAM and an
% $8$~MB L2 cache (a ThinLinc computer of the IT department).
  Results within $600$~seconds on an iMac (late 2013, $3.2$~GHz Intel
  Core i5, RAM $8$~GB $1600$~MHz DDR3): \\~

  \begin{tiny}
    \begin{tabular}{rrrrrrrrrrr} % right [r] for decimal-point alignment
      \input{res-WLP.tex}
    \end{tabular} \\~\\~
    %% Delete the following line:
    \todo{\hfill (Clara and Whiz will run the remaining experiments later)}
  \end{tiny}
  
  \todo{\vfill [In general: tweak \& evaluate the approach on backends
    of all the considered technologies, until at least two backends of
    distinct technologies are at least somewhat competitive with the
    state of the art, and no backend produces errors.]}
\end{frame}

\section{Conclusion}

\begin{frame}{Conclusion}
  \structure{Insights:} \vfill
  \begin{itemize}
  \item \todo{\dots} \vfill\myPause
  \item \todo{\dots} \vfill\myPause
  \end{itemize}
  \structure{Future work for the final project report:} \vfill
  \begin{itemize}
  \item \todo{\dots} \vfill\myPause
  \item \todo{\dots} \vfill\myPause
  \end{itemize}
\end{frame}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
